<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Control Domótico ESP32</title>
  <style>
    body { font-family: Arial; text-align: center; margin: 30px; }
    button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    .section { margin-top: 30px; }
  </style>
</head>
<body>

  <h1>Panel de Control Domótico</h1>
  <p>Conectado al ESP32 por WiFi</p>

  <div class="section">
    <h2>LEDs</h2>
    <div>
      <button onclick="toggleLed(1)">Luz Habitacion 1</button>
      <button onclick="toggleLed(2)">Luz Habitacion 2</button>
      <button onclick="toggleLed(3)">Luz Habitacion 3</button>
      <button onclick="toggleLed(4)">Luz Habitacion 4</button>
      <button onclick="toggleLed(5)">Luz Habitacion 5</button>
    </div>
  </div>

  <div class="section">
    <h2>Servomotores</h2>
    <div>
      <button onclick="moverServo(1, 0)">Abrir Puerta Garage</button>
      <button onclick="moverServo(1, 90)">Cerrar Puerta Garage</button>
    </div>
    <div>
      <button onclick="moverServo(2, 0)">Abrir Puerta Habitacion 1</button>
      <button onclick="moverServo(2, 90)">Cerrar Puerta Habitacion 1</button>
    </div>
    <div>
      <button onclick="moverServo(3, 0)">Abrir Puerta Habitacion 2</button>
      <button onclick="moverServo(3, 90)">Cerrar Puerta Habitacion 2</button>
    </div>
  </div>

  <script>
    const esp32_ip = "http://192.168.1.100"; // ⚠️ cambia esta IP por la real del ESP32

    function toggleLed(num) {
      fetch(`${esp32_ip}/led/${num}/toggle`)
        .then(response => console.log(`LED ${num} toggled`))
        .catch(error => console.error("Error:", error));
    }

    function moverServo(num, angulo) {
      fetch(`${esp32_ip}/servo/${num}/${angulo}`)
        .then(response => console.log(`Servo ${num} → ${angulo}°`))
        .catch(error => console.error("Error:", error));
    }
  </script>
</body>
</html>
